<template>
  <div class="messenger">
  	<a class="btn" target="_blank" :href="href">
      <i class="fab" :class="iconClass"></i>
    </a>
  	<div class="bubble" v-if="bubble.show">
  		<div class="close" @click="close()">‚úï</div>
  		<div class="text">
  			<span>{{bubble.text}}</span> –ü—Ä–µ–¥–ª–∞–≥–∞—é –æ–±—Å—É–¥–∏—Ç—å –≤ —É–¥–æ–±–Ω–æ–º –¥–ª—è –≤–∞—Å –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–µ üôÇ
  		</div>
  	</div>
  </div>
</template>

<script>
export default {
  data() {
    return {
  	  bubble: {
  		  show: true,
  		  text: 'üëã –•–æ—Ç–∏—Ç–µ –Ω–∞—á–∞—Ç—å –ø—Ä–æ–µ–∫—Ç?'
  	  },
  	  source: this.$route.query.utm_source
    }
  },
  methods: {
    close(){
      this.bubble.show = false
    },
    message(){
    },
    updateBubbleText(){
      if(this.source){
        this.bubble.text = 'üëã –ü–æ–Ω—Ä–∞–≤–∏–ª—Å—è ' + this.source + '.ru? –•–æ—Ç–∏—Ç–µ —Ç–∞–∫–æ–π –∂–µ —Å–∞–π—Ç?'
      }
    }
  },
  computed: {
    href() {
      return this.$mq === 'mobile'
      ? 'https://api.whatsapp.com/send?phone=79261118328&text=–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!%20–ú–µ–Ω—è%20–∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç%20'
      : 'https://t-do.ru/sfilimonov'
    },
    iconClass() {
      return this.$mq === 'mobile'
      ? 'fa-whatsapp'
      : 'fa-telegram-plane'
    }
  },
  mounted() {
    this.updateBubbleText()
  }
}
</script>
